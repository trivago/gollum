.. Autogenerated by Gollum RST generator (docs/generator/*.go)

Kafka
=====


The kafka producer writes messages to a kafka cluster. This producer is
backed by the sarama library so most settings relate to that library.




Parameters
----------

**ClientId**
sets the client id of this producer. By default this is "gollum".


**Version**
defines the kafka protocol version to use. Common values are 0.8.2,
0.9.0 or 0.10.0. Values of the form "A.B" are allowed as well as "A.B.C"
and "A.B.C.D". Defaults to "0.8.2". If the version given is not known, the
closest possible version is chosen.


**Partitioner**
sets the distribution algorithm to use. Valid values are:
"Random","Roundrobin" and "Hash". By default "Roundrobin" is set.


**FilterAfterFormat**
behaves like Filter but allows filters to be executed
after the formatter has run. By default no such filter is set.


**RequiredAcks**
defines the acknowledgment level required by the broker.
0 = No responses required. 1 = wait for the local commit. -1 = wait for
all replicas to commit. >1 = wait for a specific number of commits.
By default this is set to 1.


**TimeoutMs**
denotes the maximum time the broker will wait for acks. This
setting becomes active when RequiredAcks is set to wait for multiple commits.
By default this is set to 10 seconds.


**SendRetries**
defines how many times to retry sending data before marking a
server as not reachable. By default this is set to 1.


**Compression**
sets the method of compression to use. Valid values are:
"None","Zip" and "Snappy". By default "None" is set.


**MaxOpenRequests**
defines the number of simultaneous connections are allowed.
By default this is set to 5.


**BatchMinCount**
sets the minimum number of messages required to trigger a
flush. By default this is set to 1.


**BatchMaxCount**
defines the maximum number of messages processed per
request. By default this is set to 0 for "unlimited".


**BatchSizeByte**
sets the minimum number of bytes to collect before a new flush
is triggered. By default this is set to 8192.


**BatchSizeMaxKB**
defines the maximum allowed message size. By default this is
set to 1024.


**BatchTimeoutMs**
sets the minimum time in milliseconds to pass after which a new
flush will be triggered. By default this is set to 3.


**MessageBufferCount**
sets the internal channel size for the kafka client.
By default this is set to 8192.


**ServerTimeoutSec**
defines the time after which a connection is set to timed
out. By default this is set to 30 seconds.


**SendTimeoutMs**
defines the number of milliseconds to wait for a server to
resond before triggering a timeout. Defaults to 250.


**ElectRetries**
defines how many times to retry during a leader election.
By default this is set to 3.


**ElectTimeoutMs**
defines the number of milliseconds to wait for the cluster to
elect a new leader. Defaults to 250.


**GracePeriodMs**
defines the number of milliseconds to wait for Sarama to
accept a single message. After this period a message is sent to the fallback.
By default this is set to 100ms.


**MetadataRefreshMs**
set the interval in seconds for fetching cluster metadata.
By default this is set to 600000 (10 minutes). This corresponds to the JVM
setting `topic.metadata.refresh.interval.ms`.


**TlsEnable**
defines whether to use TLS to communicate with brokers. Defaults
to false.


**TlsKeyLocation**
defines the path to the client's private key (PEM) for used
for authentication. Defaults to "".


**TlsCertificateLocation**
defines the path to the client's public key (PEM) used
for authentication. Defaults to "".


**TlsCaLocation**
defines the path to CA certificate(s) for verifying the broker's
key. Defaults to "".


**TlsServerName**
is used to verify the hostname on the server's certificate
unless TlsInsecureSkipVerify is true. Defaults to "".


**TlsInsecureSkipVerify**
controls whether to verify the server's certificate
chain and host name. Defaults to false.


**SaslEnable**
is whether to use SASL for authentication. Defaults to false.


**SaslUsername**
is the user for SASL/PLAIN authentication. Defaults to "gollum".


**SaslPassword**
is the password for SASL/PLAIN authentication. Defaults to "".


**Servers**
contains the list of all kafka servers to connect to.  By default this
is set to contain only "localhost:9092".


**KeyMetaField**
set the message meta data key to get the kafka key from the meta data.


**Topic**
maps a stream to a specific kafka topic. You can define the
wildcard stream (*) here, too. If defined, all streams that do not have a
specific mapping will go to this topic (including _GOLLUM_).
If no topic mappings are set the stream names will be used as topic.


Parameters (from BufferedProducer)
----------------------------------

**Enable**
switches the consumer on or off. By default this value is set to true.


**ID**
allows this producer to be found by other plugins by name. By default this
is set to "" which does not register this producer.


**Channel**
sets the size of the channel used to communicate messages. By default
this value is set to 8192.


**ChannelTimeoutMs**
sets a timeout in milliseconds for messages to wait if this
producer's queue is full.
A timeout of -1 or lower will send the message the the fallback without notice.
A timeout of 0 will block until the queue is free. This is the default.
A timeout of 1 or higher will wait x milliseconds for the queues to become
available again. If this does not happen, the message will be send to the
retry channel.


**ShutdownTimeoutMs**
sets a timeout in milliseconds that will be used to detect
a blocking producer during shutdown. By default this is set to 1 second.
Decreasing this value may lead to lost messages during shutdown. Increasing
this value will increase shutdown time.


**Router**
contains either a single string or a list of strings defining the
message channels this producer will consume. By default this is set to "*"
which means "listen to all routers but the internal".


**FallbackStream**
defines the stream used for messages that are sent to the fallback after
a timeout (see ChannelTimeoutMs). By default this is _DROPPED_.


**Formatter**
sets a formatter to use. Each formatter has its own set of options
which can be set here, too. By default this is set to format.Forward.
Each producer decides if and when to use a Formatter.


**Filter**
sets a filter that is applied before formatting, i.e. before a message
is send to the message queue. If a producer requires filtering after
formatting it has to define a separate filter as the producer decides if
and where to format.


Parameters (from SimpleProducer)
--------------------------------

**Enable**
switches the consumer on or off. By default this value is set to true.


**ID**
allows this producer to be found by other plugins by name. By default this
is set to "" which does not register this producer.


**Channel**
sets the size of the channel used to communicate messages. By default
this value is set to 8192.


**ChannelTimeoutMs**
sets a timeout in milliseconds for messages to wait if this
producer's queue is full.
A timeout of -1 or lower will try the fallback route without notice.
A timeout of 0 will block until the queue is free. This is the default.
A timeout of 1 or higher will wait x milliseconds for the queues to become
available again. If this does not happen, the message will be send to the
retry channel.


**ShutdownTimeoutMs**
sets a timeout in milliseconds that will be used to detect
a blocking producer during shutdown. By default this is set to 1 second.
Decreasing this value may lead to lost messages during shutdown. Increasing
this value will increase shutdown time.


**Router**
contains either a single string or a list of strings defining the
message channels this producer will consume. By default this is set to "*"
which means "listen to all routers but the internal".


**FallbackStream**
defines the stream used for messages that cannot be delivered
e.g. after a timeout (see ChannelTimeoutMs). By default this is "".


**Formatter**
sets a formatter to use. Each formatter has its own set of options
which can be set here, too. By default this is set to format.Forward.
Each producer decides if and when to use a Formatter.


**Filter**
sets a filter that is applied before formatting, i.e. before a message
is send to the message queue. If a producer requires filtering after
formatting it has to define a separate filter as the producer decides if
and where to format.


Example
-------

.. code-block:: yaml

	  producerKafka:
	  	type: producer.Kafka
	     ClientId: "gollum"
	     Version: "0.8.2"
	     Partitioner: "Roundrobin"
	     RequiredAcks: 1
	     TimeoutMs: 1500
	     GracePeriodMs: 10
	     SendRetries: 0
	     Compression: "None"
	     MaxOpenRequests: 5
	     MessageBufferCount: 256
	     BatchMinCount: 1
	     BatchMaxCount: 0
	     BatchSizeByte: 8192
	     BatchSizeMaxKB: 1024
	     BatchTimeoutMs: 3000
	     ServerTimeoutSec: 30
	     SendTimeoutMs: 250
	     ElectRetries: 3
	     ElectTimeoutMs: 250
	     MetadataRefreshMs: 10000
	     TlsEnabled: true
	     TlsKeyLocation: ""
	     TlsCertificateLocation: ""
	     TlsCaLocation: ""
	     TlsServerName: ""
	     TlsInsecureSkipVerify: false
	     SaslEnabled: false
	     SaslUsername: "gollum"
	     SaslPassword: ""
	     Servers:
	   	  - "localhost:9092"
	     Topic:
	       "console" : "console"
		KeyMetaField: ""
	


